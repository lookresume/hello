<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简历预览</title>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            background-color: #fff;
        }
        .container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        #resumeFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /*  右下角刷新按钮样式 */
        .refresh-btn {
            position: fixed;
            bottom: 70px;
            right: 30px;
            width: 50px;
            height: 50px;
            background-color: rgba(0, 123, 255, 0.8);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            z-index: 9999; /* 确保在最上层 */
        }

        .refresh-btn:hover {
            background-color: rgba(0, 105, 217, 1);
            transform: rotate(180deg); /* 悬停时旋转动画 */
        }

        .refresh-btn i {
            font-size: 24px;
        }

        .error-message {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <iframe id="resumeFrame" src="https://myresume-1252777009.cos.ap-beijing.myqcloud.com/index.htm" onload="handleLoad()" onerror="handleError()"></iframe>
        
        <div class="refresh-btn" onclick="refreshIframe()" title="刷新内容">
            <i class="fa fa-refresh"></i>
        </div>

        <div class="error-message" id="errorMessage">
            <h2>抱歉，网页载入失败</h2>
            <p>请检查网络连接或稍后再试</p>
            <button onclick="retryLoad()">重试</button>
        </div>
    </div>

    <script>
        // 配置项
        const securityConfig = {
            disableRightClick: true,
            disableSave: true,
            disablePrint: true,
            disableViewSource: true,
            disableCopy: false,
            disablePaste: true,
            disableSelectAll: true,
            disableDevTools: true,
            disableKeyboard: true,
            disableDrag: true,
            disableSelect: false
        };

        // 4. 刷新 iframe 的核心函数
        function refreshIframe() {
            const resumeFrame = document.getElementById('resumeFrame');
            const btnIcon = document.querySelector('.refresh-btn i');
            
            // 添加旋转动画样式类（可选）
            btnIcon.classList.add('fa-spin');
            
            // 重新加载 iframe
            resumeFrame.src = resumeFrame.src;

            // 加载完成后停止旋转图标
            resumeFrame.onload = function() {
                handleLoad();
                btnIcon.classList.remove('fa-spin');
            };
        }

        // 初始化安全限制
        function initSecurityRestrictions() {
            if (securityConfig.disableRightClick) {
                document.addEventListener('contextmenu', e => e.preventDefault());
            }
            if (securityConfig.disableSelect) {
                document.body.style.userSelect = 'none';
                document.body.style.webkitUserSelect = 'none';
            }
            if (securityConfig.disableDrag) {
                document.addEventListener('dragstart', e => e.preventDefault());
            }
            if (securityConfig.disableKeyboard) {
                document.addEventListener('keydown', function(e) {
                    const cmd = e.ctrlKey || e.metaKey;
                    if (securityConfig.disableSave && cmd && e.key === 's') e.preventDefault();
                    if (securityConfig.disablePrint && cmd && e.key === 'p') e.preventDefault();
                    if (securityConfig.disableViewSource && cmd && e.key === 'u') e.preventDefault();
                    if (securityConfig.disableCopy && cmd && e.key === 'c') e.preventDefault();
                    if (securityConfig.disablePaste && cmd && e.key === 'v') e.preventDefault();
                    if (securityConfig.disableSelectAll && cmd && e.key === 'a') e.preventDefault();
                    
                    if (securityConfig.disableDevTools) {
                        if (e.key === 'F12' || (cmd && e.shiftKey && (e.key === 'i' || e.key === 'j' || e.key === 'c'))) {
                            e.preventDefault();
                        }
                    }
                });
            }
        }

        document.addEventListener('DOMContentLoaded', initSecurityRestrictions);

        function handleLoad() {
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('resumeFrame').style.display = 'block';
        }

        function handleError() {
            document.getElementById('resumeFrame').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'block';
        }

        function retryLoad() {
            refreshIframe();
        }
    </script>
</body>
</html>